<!DOCTYPE html>
<html>
<head>
<title>Submit Complaint</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="style.css">

</head>
<body>

<div class="container mt-5 col-md-6">
<div class="card p-4">

<h3 class="text-center mb-3">Raise Complaint</h3>

<!-- FORM -->
<form id="complaintForm">

<input id="name" class="form-control my-2" placeholder="Full Name" required>
<input id="contact" class="form-control my-2" placeholder="Phone/Email" required>

<select id="department" class="form-control my-2" required>
<option value="">Select Department</option>
<option>Water</option>
<option>Road</option>
<option>Electricity</option>
<option>Sanitation</option>
</select>

<input id="title" class="form-control my-2" placeholder="Complaint Title" required>

<textarea id="description" class="form-control my-2" placeholder="Describe issue" required></textarea>

<input type="file" class="form-control my-2">
<input id="location" class="form-control my-2" placeholder="Location" required>

<button type="submit" class="btn btn-primary w-100 mt-3">
Submit Complaint
</button>

</form>

</div>
</div>

<script>
document.getElementById("complaintForm").addEventListener("submit", submitComplaint);

function submitComplaint(e){
e.preventDefault();

const data={
name:document.getElementById("name").value,
contact:document.getElementById("contact").value,
department:document.getElementById("department").value,
title:document.getElementById("title").value,
description:document.getElementById("description").value,
location:document.getElementById("location").value
};

fetch("http://localhost:5000/complaints/add",{
method:"POST",
headers:{"Content-Type":"application/json"},
body:JSON.stringify(data)
})
.then(res=>res.json())
.then(response=>{
alert("✅ Complaint submitted successfully!");
document.getElementById("complaintForm").reset();
})
.catch(err=>{
alert("❌ Server not running or error!");
console.log(err);
});
}
</script>

</body>
</html>
