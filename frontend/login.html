<!DOCTYPE html>
<html>
<head>
<title>Login - Voice2Gov</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body class="bg-light">

<div class="container mt-5 col-md-4">
<div class="card p-4">
<h3>Citizen Login</h3>

<input id="email" class="form-control my-2" placeholder="Email">
<input id="password" type="password" class="form-control my-2" placeholder="Password">

<button onclick="login()" class="btn btn-primary w-100">Login</button>
</div>
</div>

<script>
async function login(){

    const email = document.getElementById("email").value;
    const password = document.getElementById("password").value;

    const res = await fetch("http://localhost:5000/users/login",{
        method:"POST",
        headers:{
            "Content-Type":"application/json"
        },
        body: JSON.stringify({
            email: email,
            password: password
        })
    });

    const data = await res.json();

    if(res.status===200){
        alert("Login success");

        // ‚≠ê STORE EMAIL FOR DASHBOARD & FEEDBACK SYSTEM
        localStorage.setItem("userEmail", email);

        // redirect
        window.location="citizen-dashboard.html";
    }else{
        alert(data.message);
    }
}
</script>

</body>
</html>
